<html>
    <h1>Dev Page</h1>

    <h2>Endpoint documentation</h2>

    <a href="/swagger-ui/index.html#/">Swagger Doc</a>

    <hr>

    <h2>General</h2>

    <button id="sendRequestBtn">Send REST Request to health</button>
    <p id="output1">output</p>
    <script>
        document.getElementById('sendRequestBtn').addEventListener('click', function() {
            fetch('/dev/health')
                .then(response => response.text())
                .then(data => document.getElementById('output1').innerHTML=data)
                .catch(error => console.error('Error:', error));
        });
    </script>

    <button id="sendRequestBtn2">Dumb all Users from database</button>
    <p id="output2">output</p>
    <script>
        document.getElementById('sendRequestBtn2').addEventListener('click', function() {
            fetch('/dev/database')
                .then(response => response.text())
                .then(data => document.getElementById('output2').innerHTML=data)
                .catch(error => console.error('Error:', error));
        });
    </script>

    <hr>

    <h2>Auth Flow</h2>

    <input id="input1" type="text" placeholder="email@email.de" value="email@email.de">
    <input id="input2" type="text" placeholder="password" value="password123">
    <button id="sendRequestBtn3">Register User</button>
    <p id="output3">output</p>
    <script>
        document.getElementById('sendRequestBtn3').addEventListener('click', function() {
            const payload = {
                email: document.getElementById('input1').value,
                password: document.getElementById('input2').value,
                firstname:"firstname",
                lastname:"lastname"
            };
            fetch('/api/v1/auth/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
                .then(response => response.text())
                .then(data => document.getElementById('output3').innerHTML=data)
                .catch(error => console.error('Error:', error));
        });
    </script>

    <input id="input12" type="text" placeholder="email@email.de" value="email@email.de">
    <input id="input22" type="text" placeholder="password" value="password123">
    <button id="sendRequestBtn32">Login User</button>
    <p id="output32">output</p>
    <script>
        document.getElementById('sendRequestBtn32').addEventListener('click', function() {
            const payload = {
                email: document.getElementById('input12').value,
                password: document.getElementById('input22').value
            };
            fetch('/api/v1/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
                .then(response => response.json())
                .then(data=> {
                    document.getElementById('output32').innerHTML=JSON.stringify(data)
                    document.getElementById('input5').value = data.token
                })
                .catch(error => console.error('Error:', error));
        });
    </script>


    <input id="input5" placeholder="jwt">
    <button id="button5">Auth Status</button>
    <p id="output5">false</p>
    <script>
        document.getElementById('button5').addEventListener('click', function() {
            fetch('/api/v1/auth/status', {
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization':'Bearer ' + document.getElementById('input5').value
                },
            })
                .then(response => response.text())
                .then(data => document.getElementById('output5').innerHTML=data)
                .catch(error => console.error('Error:', error));
        });
    </script>

    <hr>
    <h2>Friend Controller</h2>

    <input id="input522" placeholder="jwt">
    <button id="button522">get Friends</button>
    <p id="output522">null</p>
    <script>
        document.getElementById('button522').addEventListener('click', function() {
            fetch('/api/v1/friends', {
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization':'Bearer ' + document.getElementById('input522').value
                },
            })
                .then(response => response.text())
                .then(data => document.getElementById('output522').innerHTML=data)
                .catch(error => console.error('Error:', error));
        });
    </script>

    <input id="input5222" placeholder="jwt">
    <input id="input52222" placeholder="friendID">
    <button id="button5222">Delete Friend</button>
    <p id="output5222">null</p>
    <script>
        document.getElementById('button5222').addEventListener('click', function() {
            fetch('/api/v1/friend/'+document.getElementById('input52222').value, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization':'Bearer ' + document.getElementById('input5222').value
                },
            })
                .then(response => response.text())
                .then(data => document.getElementById('output5222').innerHTML=data)
                .catch(error => console.error('Error:', error));
        });
    </script>

    <hr>
    <h2>Utility Controller</h2>

    <input id="input9" type="text" placeholder="uuids" value="">
    <input id="input99" type="text" placeholder="jwt" value="">
    <button id="sendRequestBtn9">Login User</button>
    <p id="output9">output</p>
    <script>
        document.getElementById('sendRequestBtn9').addEventListener('click', function() {
            const uuidsInput = document.getElementById('input9').value;
            const uuids = uuidsInput.split(',').map(uuid => uuid.trim()); // Split by comma and trim each UUID
            console.log(uuids);
            fetch('/api/v1/utility/identity', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization':'Bearer ' + document.getElementById('input99').value
                },
                body: JSON.stringify(uuids)
            })
                .then(response => response.json())
                .then(data=> {
                    document.getElementById('output9').innerHTML=JSON.stringify(data)
                })
                .catch(error => console.error('Error:', error));
        });
    </script>

</html>